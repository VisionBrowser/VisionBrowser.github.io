
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vision Settings</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --vision-purple: #8b5cf6;
            --vision-purple-dark: #6d28d9;
            --vision-bg: #000000;
            --vision-surface: #0a0a0b;
        }

        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            background-color: var(--vision-bg);
            color: white;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            user-select: none;
        }

        .tab-bar {
            display: flex;
            gap: 12px;
            padding: 1.5rem 1.5rem 0.5rem;
            flex-shrink: 0;
        }

        .settings-tab {
            flex: 1;
            padding: 12px;
            background: rgba(139, 92, 246, 0.05);
            border: 1px solid rgba(139, 92, 246, 0.1);
            border-radius: 12px;
            font-size: 11px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
            color: rgba(255, 255, 255, 0.4);
        }

        .settings-tab.active {
            background: var(--vision-purple);
            border-color: var(--vision-purple);
            color: white;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
        }

        .content-container {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
            scrollbar-width: none;
        }

        .content-container::-webkit-scrollbar { display: none; }

        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.3s ease; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-header { font-size: 2rem; font-weight: 800; margin-bottom: 0.5rem; letter-spacing: -0.02em; }
        .section-desc { font-size: 13px; color: #71717a; margin-bottom: 1.5rem; }
        .divider { height: 1px; background: rgba(255, 255, 255, 0.05); margin-bottom: 2rem; }

        .control-group { margin-bottom: 2rem; }
        .control-label { display: block; font-size: 13px; font-weight: 700; margin-bottom: 10px; color: white; text-transform: uppercase; letter-spacing: 0.05em; }

        .vision-select {
            width: 100%;
            background: #0a0a0b;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 12px 16px;
            color: white;
            font-size: 13px;
            outline: none;
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 14px;
        }

        .vision-btn {
            background: var(--vision-purple);
            color: white;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            transition: all 0.2s;
        }

        .vision-btn:hover { filter: brightness(1.2); transform: translateY(-1px); }
        .vision-btn:disabled { opacity: 0.3; cursor: not-allowed; }

        .info-box {
            padding: 1rem;
            background: rgba(139, 92, 246, 0.05);
            border: 1px solid rgba(139, 92, 246, 0.1);
            border-radius: 12px;
            font-size: 12px;
            color: #a1a1aa;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="tab-bar">
        <div class="settings-tab active" data-tab="browser">Browser</div>
        <div class="settings-tab" data-tab="visual">Aesthetics</div>
        <div class="settings-tab" data-tab="privacy">Privacy</div>
    </div>

    <div class="content-container">
        <!-- Browser Section -->
        <div id="browser" class="tab-content active">
            <h1 class="section-header">Engine Settings</h1>
            <p class="section-desc">Manage how Vision interacts with the web.</p>
            <div class="divider"></div>

            <div class="control-group">
                <label class="control-label">Search Provider</label>
                <select id="engine-select" class="vision-select">
                    <option value="https://www.google.com/search?q=">Google (Recommended)</option>
                    <option value="https://duckduckgo.com/?q=">DuckDuckGo</option>
                    <option value="https://www.bing.com/search?q=">Bing</option>
                </select>
            </div>

            <div class="control-group">
                <label class="control-label">Proxy Protocol</label>
                <select class="vision-select">
                    <option>Vision Tunnel v2 (Active)</option>
                    <option disabled>Direct Node (Locked)</option>
                </select>
            </div>

            <div class="info-box mt-8">
                <strong>Note:</strong> Navigation is currently routed through your custom <code>/active/embed.html</code> gateway for maximum security.
            </div>
        </div>

        <!-- Visual Section -->
        <div id="visual" class="tab-content">
            <h1 class="section-header">Aesthetics</h1>
            <p class="section-desc">Customize your visual browsing experience.</p>
            <div class="divider"></div>

            <div class="control-group">
                <label class="control-label">Core Theme</label>
                <select id="theme-select" class="vision-select">
                    <option>Deep Void Purple (Default)</option>
                    <option>Midnight Gray</option>
                    <option>Obsidian Blue</option>
                </select>
            </div>

            <div class="control-group">
                <label class="control-label">Tab Shape</label>
                <select id="shape-select" class="vision-select">
                    <option>Modern Rounded (8px)</option>
                    <option>Classic Block</option>
                    <option>Sharp Edge</option>
                </select>
            </div>
        </div>

        <!-- Privacy Section -->
        <div id="privacy" class="tab-content">
            <h1 class="section-header">Privacy</h1>
            <p class="section-desc">Control your data and cloaking settings.</p>
            <div class="divider"></div>

            <div class="control-group">
                <label class="control-label">Clear Session Data</label>
                <p class="text-xs text-zinc-500 mb-4">Wipe all local storage, tab history, and vision engine metadata.</p>
                <button id="clear-btn" class="vision-btn bg-red-600">Flush All Data</button>
            </div>

            <div class="control-group">
                <label class="control-label">About:Blank Cloak</label>
                <p class="text-xs text-zinc-500 mb-4">Run the browser inside a stealth frame to hide from local network history logs.</p>
                <button class="vision-btn" disabled>Coming Soon</button>
            </div>
        </div>
    </div>

    <script>
        const tabs = document.querySelectorAll('.settings-tab');
        const contents = document.querySelectorAll('.tab-content');

        tabs.forEach(tab => {
            tab.onclick = () => {
                const target = tab.dataset.tab;
                tabs.forEach(t => t.classList.remove('active'));
                contents.forEach(c => c.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById(target).classList.add('active');
            };
        });

        function notifyUpdate() {
            window.parent.postMessage({ type: 'update-settings' }, '*');
        }

        const engineSelect = document.getElementById('engine-select');
        const themeSelect = document.getElementById('theme-select');
        const shapeSelect = document.getElementById('shape-select');

        // Load current settings
        const savedEngine = localStorage.getItem('vision_search_engine');
        if (savedEngine) engineSelect.value = savedEngine;

        const savedTheme = localStorage.getItem('vision_theme');
        if (savedTheme) themeSelect.value = savedTheme;

        const savedShape = localStorage.getItem('vision_tab_shape');
        if (savedShape) shapeSelect.value = savedShape;

        // Change listeners
        engineSelect.onchange = () => {
            localStorage.setItem('vision_search_engine', engineSelect.value);
            notifyUpdate();
        };

        themeSelect.onchange = () => {
            localStorage.setItem('vision_theme', themeSelect.value);
            notifyUpdate();
        };

        shapeSelect.onchange = () => {
            localStorage.setItem('vision_tab_shape', shapeSelect.value);
            notifyUpdate();
        };

        document.getElementById('clear-btn').onclick = () => {
            if(confirm('This will wipe your vision browser session. Continue?')) {
                localStorage.clear();
                window.parent.location.reload();
            }
        };

        window.parent.postMessage({ type: 'metadata', title: 'Vision Settings' }, '*');
    </script>
</body>
</html>
